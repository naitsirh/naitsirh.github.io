<!DOCTYPE html>
<html lang="es">


<head>
  <meta charset="utf-8">
  <title>Currículum Nüesch</title>
  <link rel="shortcut icon" type="image/png" href="cv-nueesch.png">
  <style>
  	body {
  	  margin-left: 35pt;
  	  margin-right: 35pt;
  	  margin-top: 10pt;
  	  margin-bottom: 20pt;
      overflow-x: hidden;
  	}

    img.class3 {
      position: absolute;
      right: 0;
      top: 0;
    }

    img.class4 {
      margin-left: -46pt;
      margin-bottom: -23pt;
    }

  	div {
  	  padding: 1em;
  	}

  	h1 {
  	  font-size: 44pt;
  	  font-family: Segoe UI;
  	}

  	h3 {
  	  display: inline;
  	  margin-left: 0.4em;
  	  font-family: Segoe UI;
  	}

  	a.class1 {
  	  font-size: 24px;
  	  font-weight: bold;
  	  color: rgba(0, 0, 0, 0.6);
  	  text-decoration: none;
  	  padding: 0.3em 0.5em;
  	  border-radius: 5px;
  	  background-color: #f2f8fb;
  	  transition: background-color 1s linear;
  	}

  	a.class2 {
  	  font-size: 13pt;
  	  font-weight: 600;
  	  color: rgb(0, 0, 0);
  	  text-decoration: none;
  	  padding: 0.2em 0.2em;
  	  border-radius: 3px;
  	  background-color: #f2f8fb;
  	  transition: background-color 1s linear;
  	}

    a.class5 {
      font-size: 24px;
      font-weight: bold;
      color: rgba(0, 0, 0, 0.6);
      text-decoration: none;
      padding: 0.3em 0.5em;
      border-radius: 5px;
      background-color: #f2f8fb;
      transition: background-color 1s linear;
    }

    a:hover, input:hover, button:hover,
    a:focus, input:focus, button:focus {
      /*background-color: #add8e6;*/
      background-color: #00aae4;
    }

    a.class5:hover, input:hover, button:hover,
    a.class5:focus, input:focus, button:focus {
      /*background-color: #add8e6;*/
      /*background-color: #00aae4;*/
      background-color: #f40f02;
    }

  	p, ol {
  	  font-size: 13pt;
  	  font-family: Segoe UI;
  	}
    
    text {
      font-family: sans-serif;
      pointer-events: none;
    }
  </style>
</head>


<body>
  
  <img src="borde-sup.png" class="class3">

  <br>

  <h1>Currículum Vitae Nüesch</h1>

  <div>
    <h3>
      <a href="https://naitsirh.github.io/c1.html" class="class1">Modelo1</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c2.html" class="class1">Modelo2</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c3.html" class="class1">Modelo3</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c4.html" class="class1">Modelo4</a>
    </h3>
    <h3>
      <a href="#" class="class1">Modelo5</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c6.html" class="class1">Modelo6</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c7.html" class="class1">Modelo7</a>
    </h3>
    <h3>
      <a href="https://naitsirh.github.io/c8.html" class="class1">Modelo8</a>
    </h3>
    <h3>
      <a href="curriculum_nueesch.html" class="class5" target="_blank" rel="noopener noreferrer">PDF</a>
    </h3>
  </div>


  <p>
    Este es un modelo de presentación de mis datos personales, de entre varios.
  </p>
  <p>
    Aquí también muestro los datos de mi currículum a través de un grafo de fuerzas no<br/>
    dirigido, con etiquetas en cada nodo.
  </p>
  <p>
    Este grafo presenta las siguientes características dinámicas:
  </p>
  <ol>
    <li>Nodos arrastrables</li>
    <li>Zoom y panorámica (con límite máximo de tamaño efectivo para elementos ampliados)</li>
    <li>Doble clic para centrar el nodo</li>
    <li>Ventana ajustable (con reubicación del centro de gravedad con reconocimiento de<br/>
    zoom / panorámica)</li>
    <li>Etiquetas de texto (las cuales no quedan ocultas por los nodos; marca para establecer<br/>
    centrado / desplazamiento)</li>
    <li>Las propiedades de los datos de entrada determinan el tamaño y la forma del nodo, y los<br/>
    colores de los nodos y enlaces (con valores predeterminados; y marca para establecer el<br/>
    relleno / contorno)</li>
    <li>Filtrar nodos por forma (c, d, r, s, t, x), por puntuación (l, h, m), si son<br/>
    huérfanos (0), y filtrar enlaces por puntuación (1,2,3)</li>
    <li>Desplzar por encima para resaltar los vecinos de primer orden. Clic para atenuar los<br/>
    alrededores</li>
  </ol>
  <p>
  	Los recursos utilizados se pueden encontrar en <a href="http://bl.ocks.org/eyaler/10586116" class="class2" target="_blank" rel="noopener noreferrer">este enlace</a>.
  </p>


  <!--<script src="https://d3js.org/d3.v3.min.js"></script>-->
  <script type="text/javascript" src="d3.v3.min.js"></script>
  <script>
  //var w = window.innerWidth;
  var w = 960;
  var h = window.innerHeight;
  //var h = 600;

  var keyc = true, keys = true, keyt = true, keyr = true, keyx = true, keyd = true, keyl = true, keym = true, keyh = true, key1 = true, key2 = true, key3 = true, key0 = true

  var focus_node = null, highlight_node = null;

  var text_center = false;
  var outline = false;

  var min_score = 0;
  var max_score = 1;

  var color = d3.scale.linear()
    .domain([min_score, (min_score+max_score)/2, max_score])
    .range(["lime", "yellow", "red"]);

  var highlight_color = "blue";
  var highlight_trans = 0.1;
    
  var size = d3.scale.pow().exponent(1)
    .domain([1,100])
    .range([8,24]);
    
  var force = d3.layout.force()
    .linkDistance(60)
    .charge(-300)
    .size([w,h]);

  var default_node_color = "#ccc";
  //var default_node_color = "rgb(3,190,100)";
  var default_link_color = "#888";
  var nominal_base_node_size = 8;
  var nominal_text_size = 12;
  var max_text_size = 24;
  var nominal_stroke = 1.5;
  var max_stroke = 4.5;
  var max_base_node_size = 36;
  var min_zoom = 0.1;
  var max_zoom = 7;
  var svg = d3.select("body").append("svg");
  var zoom = d3.behavior.zoom().scaleExtent([min_zoom,max_zoom])
  var g = svg.append("g");
  svg.style("cursor","move");

  //d3.json("graph.json", function(error, graph) {
  d3.json("c5-fdgNueesch.json", function(error, graph) {
  //d3.json("a.json", function(error, graph) {

  var linkedByIndex = {};
      graph.links.forEach(function(d) {
    linkedByIndex[d.source + "," + d.target] = true;
      });

    function isConnected(a, b) {
          return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
      }

    function hasConnections(a) {
      for (var property in linkedByIndex) {
          s = property.split(",");
          if ((s[0] == a.index || s[1] == a.index) && linkedByIndex[property])          return true;
      }
    return false;
    }
    
    force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

    var link = g.selectAll(".link")
      .data(graph.links)
      .enter().append("line")
      .attr("class", "link")
    .style("stroke-width",nominal_stroke)
    .style("stroke", function(d) { 
    if (isNumber(d.score) && d.score>=0) return color(d.score);
    else return default_link_color; })


    var node = g.selectAll(".node")
      .data(graph.nodes)
      .enter().append("g")
      .attr("class", "node")
    
      .call(force.drag)

    
    node.on("dblclick.zoom", function(d) { d3.event.stopPropagation();
    //var dcx = (window.innerWidth/2-d.x*zoom.scale());
    var dcx = (960/2-d.x*zoom.scale());
    var dcy = (window.innerHeight/2-d.y*zoom.scale());
    zoom.translate([dcx,dcy]);
     g.attr("transform", "translate("+ dcx + "," + dcy  + ")scale(" + zoom.scale() + ")");
     
     
    });
    


    
    var tocolor = "fill";
    var towhite = "stroke";
    if (outline) {
      tocolor = "stroke"
      towhite = "fill"
    }
      
    
    
    var circle = node.append("path")
    
    
        .attr("d", d3.svg.symbol()
          .size(function(d) { return Math.PI*Math.pow(size(d.size)||nominal_base_node_size,2); })
          .type(function(d) { return d.type; }))
    
    .style(tocolor, function(d) { 
    if (isNumber(d.score) && d.score>=0) return color(d.score);
    else return default_node_color; })
      //.attr("r", function(d) { return size(d.size)||nominal_base_node_size; })
    .style("stroke-width", nominal_stroke)
    .style(towhite, "white");
      
          
    var text = g.selectAll(".text")
      .data(graph.nodes)
      .enter().append("text")
      .attr("dy", ".35em")
    .style("font-size", nominal_text_size + "px")

    if (text_center)
     text.text(function(d) { return d.id; })
    .style("text-anchor", "middle");
    else 
    text.attr("dx", function(d) {return (size(d.size)||nominal_base_node_size);})
      .text(function(d) { return '\u2002'+d.id; });

    node.on("mouseover", function(d) {
    set_highlight(d);
    })
    .on("mousedown", function(d) { d3.event.stopPropagation();
      focus_node = d;
    set_focus(d)
    if (highlight_node === null) set_highlight(d)
    
  } ).on("mouseout", function(d) {
      exit_highlight();

  } );

      d3.select(window).on("mouseup",  
      function() {
      if (focus_node!==null)
      {
        focus_node = null;
        if (highlight_trans<1)
        {
    
      circle.style("opacity", 1);
      text.style("opacity", 1);
      link.style("opacity", 1);
    }
      }
    
    if (highlight_node === null) exit_highlight();
      });

  function exit_highlight()
  {
      highlight_node = null;
    if (focus_node===null)
    {
      svg.style("cursor","move");
      if (highlight_color!="white")
    {
        circle.style(towhite, "white");
      text.style("font-weight", "normal");
      link.style("stroke", function(o) {return (isNumber(o.score) && o.score>=0)?color(o.score):default_link_color});
   }
        
    }
  }

  function set_focus(d)
  { 
  if (highlight_trans<1)  {
      circle.style("opacity", function(o) {
                  return isConnected(d, o) ? 1 : highlight_trans;
              });

        text.style("opacity", function(o) {
                  return isConnected(d, o) ? 1 : highlight_trans;
              });
        
              link.style("opacity", function(o) {
                  return o.source.index == d.index || o.target.index == d.index ? 1 : highlight_trans;
              });   
    }
  }


  function set_highlight(d)
  {
    svg.style("cursor","pointer");
    if (focus_node!==null) d = focus_node;
    highlight_node = d;

    if (highlight_color!="white")
    {
        circle.style(towhite, function(o) {
                  return isConnected(d, o) ? highlight_color : "white";});
        text.style("font-weight", function(o) {
                  return isConnected(d, o) ? "bold" : "normal";});
              link.style("stroke", function(o) {
            return o.source.index == d.index || o.target.index == d.index ? highlight_color : ((isNumber(o.score) && o.score>=0)?color(o.score):default_link_color);

              });
    }
  }
    
    
    zoom.on("zoom", function() {
    
      var stroke = nominal_stroke;
      if (nominal_stroke*zoom.scale()>max_stroke) stroke = max_stroke/zoom.scale();
      link.style("stroke-width",stroke);
      circle.style("stroke-width",stroke);
       
    var base_radius = nominal_base_node_size;
      if (nominal_base_node_size*zoom.scale()>max_base_node_size) base_radius = max_base_node_size/zoom.scale();
          circle.attr("d", d3.svg.symbol()
          .size(function(d) { return Math.PI*Math.pow(size(d.size)*base_radius/nominal_base_node_size||base_radius,2); })
          .type(function(d) { return d.type; }))
      
    //circle.attr("r", function(d) { return (size(d.size)*base_radius/nominal_base_node_size||base_radius); })
    if (!text_center) text.attr("dx", function(d) { return (size(d.size)*base_radius/nominal_base_node_size||base_radius); });
    
    var text_size = nominal_text_size;
      if (nominal_text_size*zoom.scale()>max_text_size) text_size = max_text_size/zoom.scale();
      text.style("font-size",text_size + "px");

    g.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
    });
     
    svg.call(zoom);   
    
    resize();
    //window.focus();
    d3.select(window).on("resize", resize).on("keydown", keydown);
      
    force.on("tick", function() {
      
      node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
      text.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
    
      link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });
      
      node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
    });
    
    function resize() {
      //var width = window.innerWidth, height = window.innerHeight;
      var width = 960, height = window.innerHeight;
    svg.attr("width", width).attr("height", height);
      
    force.size([force.size()[0]+(width-w)/zoom.scale(),force.size()[1]+(height-h)/zoom.scale()]).resume();
      w = width;
    h = height;
    }
    
    function keydown() {
    if (d3.event.keyCode==32) {  force.stop();}
    else if (d3.event.keyCode>=48 && d3.event.keyCode<=90 && !d3.event.ctrlKey && !d3.event.altKey && !d3.event.metaKey)
    {
    switch (String.fromCharCode(d3.event.keyCode)) {
      case "C": keyc = !keyc; break;
      case "S": keys = !keys; break;
    case "T": keyt = !keyt; break;
    case "R": keyr = !keyr; break;
      case "X": keyx = !keyx; break;
    case "D": keyd = !keyd; break;
    case "L": keyl = !keyl; break;
    case "M": keym = !keym; break;
    case "H": keyh = !keyh; break;
    case "1": key1 = !key1; break;
    case "2": key2 = !key2; break;
    case "3": key3 = !key3; break;
    case "0": key0 = !key0; break;
    }
      
    link.style("display", function(d) {
          var flag  = vis_by_type(d.source.type)&&vis_by_type(d.target.type)&&vis_by_node_score(d.source.score)&&vis_by_node_score(d.target.score)&&vis_by_link_score(d.score);
          linkedByIndex[d.source.index + "," + d.target.index] = flag;
                return flag?"inline":"none";});
    node.style("display", function(d) {
          return (key0||hasConnections(d))&&vis_by_type(d.type)&&vis_by_node_score(d.score)?"inline":"none";});
    text.style("display", function(d) {
                  return (key0||hasConnections(d))&&vis_by_type(d.type)&&vis_by_node_score(d.score)?"inline":"none";});
          
          if (highlight_node !== null)
          {
            if ((key0||hasConnections(highlight_node))&&vis_by_type(highlight_node.type)&&vis_by_node_score(highlight_node.score)) { 
            if (focus_node!==null) set_focus(focus_node);
            set_highlight(highlight_node);
            }
            else {exit_highlight();}
          }

  } 
  }
   
  });

  function vis_by_type(type)
  {
    switch (type) {
      case "circle": return keyc;
      case "square": return keys;
      case "triangle-up": return keyt;
      case "diamond": return keyr;
      case "cross": return keyx;
      case "triangle-down": return keyd;
      default: return true;
  }
  }
  function vis_by_node_score(score)
  {
    if (isNumber(score))
    {
    if (score>=0.666) return keyh;
    else if (score>=0.333) return keym;
    else if (score>=0) return keyl;
    }
    return true;
  }

  function vis_by_link_score(score)
  {
    if (isNumber(score))
    {
    if (score>=0.666) return key3;
    else if (score>=0.333) return key2;
    else if (score>=0) return key1;
  }
    return true;
  }

  function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
  } 


  </script>


  <br>
  <br>

  <img src="borde-inf.png" class="class4">


</body>

</html>